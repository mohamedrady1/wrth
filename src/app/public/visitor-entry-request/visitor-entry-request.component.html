<div class="row-offcanvas row-offcanvas-left clearfix" *ngIf="menuItems.includes('Institute Visitors')">
  <main class="main-content" id="content" role="main">
    <div id="block-rita-page-title" class="block block-core block-page-title-block">
      <div class="content">
        <div class="container">
          <h1 class="page-title">
            <span class="field field--name-title field--type-string field--label-hidden">تصريح دخول زوار المعهد</span>
          </h1>
        </div>
      </div>
    </div>
    <div class="events_list">
      <div class="container">
        <form [formGroup]="visitorForm" (ngSubmit)="onSubmit()" class="events_list_form events_list_order">
          <div class="row">
            <div class="col-md-12 pad_0">
              <h2 class="Title_order">بيانات الطلب</h2>
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>جهة الزيارة</span>
              <img [src]="'assets/images/basil_location-solid.svg'" alt="">
              <input
                [class.inputDone]="fcError('VisitDestination') == 1"
                [class.inputUnDone]="fcError('VisitDestination') == 2"
                type="text" placeholder="جهة الزيارة" formControlName="VisitDestination" id="VisitDestination">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
                *ngIf="fcError('VisitDestination') == 1" alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
                *ngIf="fcError('VisitDestination') == 2" alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>أسباب الزيارة</span>
              <img [src]="'assets/images/fluent_people-20-regular.svg'" alt="">
              <input
                [class.inputDone]="fcError('VisitReasons') == 1"
                [class.inputUnDone]="fcError('VisitReasons') == 2"
                type="text" placeholder="أسباب الزيارة" formControlName="VisitReasons" id="VisitReasons">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
                *ngIf="fcError('VisitReasons') == 1" alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
                *ngIf="fcError('VisitReasons') == 2" alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>الإدارة المستفيدة</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
                [class.inputDone]="fcError('BeneficiaryAdministration') == 1"
                [class.inputUnDone]="fcError('BeneficiaryAdministration') == 2"
                type="text" placeholder="الإدارة المستفيدة" formControlName="BeneficiaryAdministration" id="BeneficiaryAdministration">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
                *ngIf="fcError('BeneficiaryAdministration') == 1" alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
                *ngIf="fcError('BeneficiaryAdministration') == 2" alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>موعد الزيارة</span>
              <label for="visitDateTimeFrom">من</label>
              <input
                [class.inputDone]="fcError('VisitDateTimeFrom') == 1 && !visitorForm.hasError('timeOrderInvalid')"
                [class.inputUnDone]="fcError('VisitDateTimeFrom') == 2 || visitorForm.hasError('timeOrderInvalid')"
                formControlName="VisitDateTimeFrom"
                type="time" id="VisitDateTimeFrom">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
                *ngIf="fcError('VisitDateTimeFrom') == 1 && !visitorForm.hasError('timeOrderInvalid')" alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
                *ngIf="fcError('VisitDateTimeFrom') == 2 || visitorForm.hasError('timeOrderInvalid')" alt="">
              <label for="visitDateTimeFrom">إلى</label>
              <input
                [class.inputDone]="fcError('VisitDateTimeTo') == 1 && !visitorForm.hasError('timeOrderInvalid')"
                [class.inputUnDone]="fcError('VisitDateTimeTo') == 2 || visitorForm.hasError('timeOrderInvalid')"
                formControlName="VisitDateTimeTo"
                type="time" id="VisitDateTimeTo">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
                *ngIf="fcError('VisitDateTimeTo') == 1 && !visitorForm.hasError('timeOrderInvalid')" alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
                *ngIf="fcError('VisitDateTimeTo') == 2 || visitorForm.hasError('timeOrderInvalid')" alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>اسم الموظف</span>
              <img [src]="'assets/images/userregister.svg'" alt="">
              <input
              [class.inputDone]="fcError('EmployeeName') == 1"
              [class.inputUnDone]="fcError('EmployeeName') == 2"
              type="text" placeholder="اسم الموظف" formControlName="EmployeeName" id="EmployeeName">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('EmployeeName') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('EmployeeName') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span> موقع الزيارة </span>
              <img [src]="'assets/images/basil_location-solid.svg'" alt="">
              <input
              [class.inputDone]="fcError('VisitLocation') == 1"
              [class.inputUnDone]="fcError('VisitLocation') == 2"
              type="text" placeholder="موقع الزيارة " formControlName="VisitLocation" id="VisitLocation">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('VisitLocation') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('VisitLocation') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>البريد الإلكتروني</span>
              <img [src]="'assets/images/arcticons_mail.svg'" alt="">
              <input
              [class.inputDone]="fcError('Email') == 1"
              [class.inputUnDone]="fcError('Email') == 2"
              type="email" placeholder="البريد الإلكتروني" formControlName="Email" id="email">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('Email') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('Email') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>رقم الجوال</span>
              <img [src]="'assets/images/ph_phone-thin.svg'" alt="">
              <input
              [class.inputDone]="fcError('PhoneNumber') == 1"
              [class.inputUnDone]="fcError('PhoneNumber') == 2"
              type="text" placeholder="رقم الجوال" formControlName="PhoneNumber" id="PhoneNumber">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('PhoneNumber') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('PhoneNumber') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span> تاريخ الزيارة </span>
              <img [src]="'assets/images/uit_calender.svg'" alt="">
              <input
              [class.inputDone]="fcError('VisitDate') == 1"
              [class.inputUnDone]="fcError('VisitDate') == 2"
              type="date" placeholder="تاريخ الزيارة" formControlName="VisitDate" id="VisitDate">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('VisitDate') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('VisitDate') == 2"  alt="">
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 pad_0">
              <h2 class="Title_order">بيانات الزائر</h2>
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>الاسم</span>
              <img [src]="'assets/images/circum_user.svg'" alt="">
              <input
              [class.inputDone]="fcError('FullName') == 1"
              [class.inputUnDone]="fcError('FullName') == 2"
              type="text" placeholder="الاسم" formControlName="FullName" id="FullName">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('FullName') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('FullName') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>رقم الهوية</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
              [class.inputDone]="fcError('IdentityNumber') == 1"
              [class.inputUnDone]="fcError('IdentityNumber') == 2"
              type="text" minlength="10" maxlength="10" placeholder="رقم الهوية"
              formControlName="IdentityNumber" id="IdentityNumber">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('IdentityNumber') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('IdentityNumber') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>الجنسية</span>
              <img [src]="'assets/images/globe.svg'" alt="" style="margin: 0 5px;">
              <ng-select [class.inputDone]="fcError('Nationality') == 1"
                      [class.inputUnDone]="fcError('Nationality') == 2"
                      formControlName="Nationality"
                      id="Nationality"
                      [searchable]="true"
                      [multiple]="false"
                      [clearable]="false"
                      [appearance]="'outline'"
                      [style]="'width: 270px'"
                      [notFoundText]="'أدخل اسم دولة صالح!'"
                      [items]="nations"
                      >
              </ng-select>
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'" *ngIf="fcError('Nationality') == 1" alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'" *ngIf="fcError('Nationality') == 2" alt="">
            </div>
            <div class="col-md-12 pad_0">
              <div class="image-preview" *ngIf="selectedImageUrl !== ''">
                <img [src]="selectedImageUrl" alt="Selected Image">
                <button (click)="removeSelected()" class="close-button">X</button>
              </div>
              <ng-container *ngIf="selectedImageUrl === ''">
                <h2 class="Title_upload">ارفاق صورة الهوية او الاقامة</h2>
                <div class="upload uploadFile">
                  <div class="upload-progress"></div>
                  <main class="upload-main">
                    <label class="upload-drop">
                      <div class="upload-file-name"></div>
                      <img class="icon upload-icon" [src]="'assets/images/upload.svg'" alt="">
                      <h3>اسقاط او اسحب الملف هنا</h3>
                      <input type="file" class="upload-input" (change)="onFileSelected($event)" formControlName="IdentityPhotoFile">
                      <span>أو</span>
                      <a class="upload-icon">اضغط هنا للرفع</a>
                    </label>
                  </main>
                </div>
              </ng-container>
            </div>
          </div>
          <div class="col-md-6 pad_0 form-field">
            <label>هل لديك سيارة؟</label>
            <div>
              <input type="radio" id="hasVehicleYes" [value]="true" formControlName="HasVehicle">
              <label for="hasVehicleYes">نعم</label>
            </div>
            <div>
              <input type="radio" id="hasVehicleNo" [value]="false" formControlName="HasVehicle">
              <label for="hasVehicleNo">لا</label>
            </div>
          </div>
          <div class="row" *ngIf="visitorForm.get('HasVehicle')?.value">
            <div class="col-md-12 pad_0">
              <h2 class="Title_order">بيانات المركبة</h2>
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>اسم السائق</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
              [class.inputDone]="fcError('DriverFullName') == 1"
              [class.inputUnDone]="fcError('DriverFullName') == 2"
              type="text" placeholder="اسم السائق" formControlName="DriverFullName" id="DriverFullName">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('DriverFullName') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('DriverFullName') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>الهوية</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
              [class.inputDone]="fcError('DriverIdentityNumber') == 1"
              [class.inputUnDone]="fcError('DriverIdentityNumber') == 2"
              type="text" placeholder="الهوية" formControlName="DriverIdentityNumber" id="DriverIdentityNumber">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('DriverIdentityNumber') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('DriverIdentityNumber') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>الجنسية</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
              [class.inputDone]="fcError('DriverNationality') == 1"
              [class.inputUnDone]="fcError('DriverNationality') == 2"
              type="text" placeholder="الجنسية" formControlName="DriverNationality" id="DriverNationality">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('DriverNationality') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('DriverNationality') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>نوع المركبة</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
              [class.inputDone]="fcError('VehicleType') == 1"
              [class.inputUnDone]="fcError('VehicleType') == 2"
              type="text" placeholder="نوع المركبة" formControlName="VehicleType" id="VehicleType">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('VehicleType') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('VehicleType') == 2"  alt="">
            </div>
            <div class="col-md-6 pad_0 form-field">
              <span>رقم اللوحة</span>
              <img [src]="'assets/images/ic_outline-work-outline.svg'" alt="">
              <input
              [class.inputDone]="fcError('PlateNumber') == 1"
              [class.inputUnDone]="fcError('PlateNumber') == 2"
              type="text" placeholder="رقم اللوحة" formControlName="PlateNumber" id="PlateNumber">
              <img class="dynamic-validation-icon" [src]="'assets/images/done.svg'"
              *ngIf="fcError('PlateNumber') == 1"  alt="">
              <img class="dynamic-validation-icon" [src]="'assets/images/undone.svg'"
              *ngIf="fcError('PlateNumber') == 2"  alt="">
            </div>
          </div>
          <div class="col-md-12">
            <button class="btn_form" type="submit" [disabled]="!visitorForm.valid"
            [class.disabled]="!visitorForm.valid"> طلب الان
              <span *ngIf="showRegisterBtnLoader" class="loader">
                <svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    width="40px" height="40px" viewBox="0 0 40 40"
                    enable-background="new 0 0 40 40" xml:space="preserve">
                    <path opacity="0.2" fill="#000"
                        d="M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946
s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634
c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z" />
                    <path fill="#000" d="M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0
C22.32,8.481,24.301,9.057,26.013,10.047z">
                        <animateTransform attributeType="xml"
                            attributeName="transform" type="rotate" from="0 20 20"
                            to="360 20 20" dur="0.5s" repeatCount="indefinite" />
                    </path>
                </svg>
            </span>
          </button>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>
